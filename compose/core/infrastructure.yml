# Auto-generated from services.registry.yaml
# DO NOT EDIT MANUALLY - run scripts/codegen/generate-compose.main.kts

services:
  caddy:
    image: caddy:2.8.4
    container_name: caddy
    ports:
      - "80:80"
      - "443:443"
      - "443:443/udp"
    networks:
      frontend:
        aliases:
          - www.${DOMAIN}
          - grafana.${DOMAIN}
          - open-webui.${DOMAIN}
          - vaultwarden.${DOMAIN}
          - app.vaultwarden.${DOMAIN}
          - planka.${DOMAIN}
          - bookstack.${DOMAIN}
          - jupyterhub.${DOMAIN}
          - homepage.${DOMAIN}
          - seafile.${DOMAIN}
          - api.seafile.${DOMAIN}
          - onlyoffice.${DOMAIN}
          - matrix.${DOMAIN}
          - api.matrix.${DOMAIN}
          - element.${DOMAIN}
          - homeassistant.${DOMAIN}
          - api.homeassistant.${DOMAIN}
          - litellm.${DOMAIN}
          - api.litellm.${DOMAIN}
          - auth.${DOMAIN}
          - kopia.${DOMAIN}
          - mail.${DOMAIN}
          - agent-tool-server.${DOMAIN}
          - lam.${DOMAIN}
          - forgejo.${DOMAIN}
          - qbittorrent.${DOMAIN}
      backend:
        aliases:
          - www.${DOMAIN}
          - grafana.${DOMAIN}
          - open-webui.${DOMAIN}
          - vaultwarden.${DOMAIN}
          - app.vaultwarden.${DOMAIN}
          - planka.${DOMAIN}
          - bookstack.${DOMAIN}
          - jupyterhub.${DOMAIN}
          - homepage.${DOMAIN}
          - seafile.${DOMAIN}
          - api.seafile.${DOMAIN}
          - onlyoffice.${DOMAIN}
          - matrix.${DOMAIN}
          - api.matrix.${DOMAIN}
          - element.${DOMAIN}
          - homeassistant.${DOMAIN}
          - api.homeassistant.${DOMAIN}
          - litellm.${DOMAIN}
          - api.litellm.${DOMAIN}
          - auth.${DOMAIN}
          - kopia.${DOMAIN}
          - mail.${DOMAIN}
          - agent-tool-server.${DOMAIN}
          - lam.${DOMAIN}
          - forgejo.${DOMAIN}
          - qbittorrent.${DOMAIN}
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 10s

  ldap:
    image: osixia/openldap:1.5.0
    container_name: ldap
    networks:
      backend: {}
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 10s
      timeout: 5s
      retries: 5
      start_period: 30s

  valkey:
    image: valkey/valkey:8.0.1
    container_name: valkey
    networks:
      backend: {}
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 10s

  ldap-account-manager:
    image: ghcr.io/ldapaccountmanager/lam:9.3
    container_name: ldap-account-manager
    networks:
      backend:
        aliases:
          - lam.${DOMAIN}
      frontend:
        aliases:
          - lam.${DOMAIN}
    depends_on:
      - ldap
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 10s

  seafile-memcached:
    image: memcached:1.6.39
    container_name: seafile-memcached
    networks:
      backend: {}
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 10s
      timeout: 5s
      retries: 3
      start_period: 10s

  docker-proxy:
    image: tecnativa/docker-socket-proxy:v0.4.1
    container_name: docker-proxy
    networks:
      backend: {}
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

  kopia:
    image: kopia/kopia:0.18.2
    container_name: kopia
    networks:
      backend:
        aliases:
          - kopia.${DOMAIN}
      frontend:
        aliases:
          - kopia.${DOMAIN}
    healthcheck:
      # Using Docker HEALTHCHECK from image
      interval: 30s
      timeout: 10s
      retries: 3
      start_period: 10s

