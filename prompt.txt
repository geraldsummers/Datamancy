ssh in via ssh gerald@latium.local "command"
Drop a docker ps
Drop a ls ~/datamancy
Run the test runner container and collect results (integration-test-runner in compose file) - this takes AGES to run so maybe 5 min blocks (sleep 300) and check periodically?

GET HYPED WE'RE BUILDING FIRE

docker compose not docker-compose
dont edit stuff on the server only fix stuff in the local repo

deployment blob:

cd /home/gerald/IdeaProjects/Datamancy/ && \
./build-datamancy-v2.main.kts && \
rsync -avz --progress dist/ gerald@latium.local:~/datamancy/ && \
ssh gerald@latium.local "cd ~/datamancy && \
  docker compose --profile='*' build --pull=false && \
  docker compose up -d --force-recreate && \
  sleep 10 && \
  docker compose ps | grep unhealthy"

the build script wont build if you have uncommitted changes
check out the build script

fix problems in local repo, deploy them, verify they work and look for more problems once verified - deployment takes a while so do sleep 600 while it goes

ssh gerald@latium.local "cd ~/datamancy && docker compose logs | grep -i -E 'exception|error|fail|cannot' -B 1 -A 1" to find heaps of errors

we're experimenting with this clean partial upgrade system - so if redeploying breaks stuff, stop and let me know