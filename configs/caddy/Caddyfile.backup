{
	admin off
	email admin@project-saturn.com
}

# Authentication endpoint (no SSO protection)
auth.project-saturn.com {
	reverse_proxy authelia:9091
}

# Grafana (OAuth via application, not forward_auth)
grafana.project-saturn.com {
	reverse_proxy grafana:3000
}

# Adminer with SSO
adminer.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy adminer:8080
}

# pgAdmin with SSO
pgadmin.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy pgadmin:80
}

# Dockge with SSO
dockge.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy dockge:5001
}

# LDAP Account Manager with SSO
lam.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy ldap-account-manager:80
}

# LocalAI with SSO
localai.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy localai:8080
}

# LiteLLM with native OAuth (no forward_auth needed)
litellm.project-saturn.com {
	reverse_proxy litellm:4000
}

# Open WebUI with native OIDC (no forward_auth needed)
open-webui.project-saturn.com {
	reverse_proxy open-webui:8080
}

# Kopia with SSO
kopia.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy kopia:51515
}

# Seafile
seafile.project-saturn.com {
	reverse_proxy seafile:80
}

# OnlyOffice Document Server
onlyoffice.project-saturn.com {
	reverse_proxy onlyoffice:80
}

# Matrix Synapse
matrix.project-saturn.com {
	reverse_proxy synapse:8008
}

# Well-known for Matrix (served here for apex convenience if needed)
project-saturn.com {
	@matrixServer path /.well-known/matrix/server
	respond @matrixServer {"m.server":"matrix.project-saturn.com:443"}

	@matrixClient path /.well-known/matrix/client
	header @matrixClient Access-Control-Allow-Origin "*"
	respond @matrixClient {"m.homeserver":{"base_url":"https://matrix.project-saturn.com"}}
}

# SOGo
sogo.project-saturn.com {
	reverse_proxy sogo:20000
}

# Mailu web (admin/webmail through front)
mail.project-saturn.com {
	reverse_proxy mailu-front:80
}

# Akkoma
akkoma.project-saturn.com {
	reverse_proxy akkoma:4000
}

# Benthos with SSO
benthos.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy benthos:4195
}


# Home Assistant with SSO via forward_auth
homeassistant.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy homeassistant:8123
}

# Planka with native OIDC (no forward_auth needed)
planka.project-saturn.com {
	reverse_proxy planka:1337
}

# Outline with native OIDC (no forward_auth needed)
outline.project-saturn.com {
	reverse_proxy outline:3000
}

# Browserless with SSO
browserless.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy browserless:3000
}

# CouchDB with SSO
couchdb.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy couchdb:5984
}

# ClickHouse with SSO
clickhouse.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy clickhouse:8123
}

# JupyterHub with native OIDC (no forward_auth needed)
jupyterhub.project-saturn.com {
	reverse_proxy jupyterhub:8000
}

# Homepage Dashboard with SSO
homepage.project-saturn.com {
	forward_auth authelia:9091 {
		uri /api/authz/forward-auth
		copy_headers Remote-User Remote-Groups Remote-Name Remote-Email
	}
	reverse_proxy homepage:3000
}

