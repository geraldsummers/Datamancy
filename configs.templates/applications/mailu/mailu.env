# Mailu main configuration
# Generated from placeholder - configured for {{DOMAIN}}

###################################
# Common configuration variables
###################################

# Set to a randomly generated 16 bytes string
SECRET_KEY={{MAILU_SECRET_KEY}}
SECRET={{MAILU_SECRET_KEY}}

# Subnet of the docker network (backend network)
SUBNET=172.21.0.0/24

# Main mail domain
DOMAIN={{DOMAIN}}

# Hostnames for this server, separated with comas
HOSTNAMES=mail.{{DOMAIN}}

# Postmaster local part (will append the main mail domain)
POSTMASTER=postmaster

# Choose how secure connections will behave (value: letsencrypt, cert, notls, mail, mail-letsencrypt)
TLS_FLAVOR=notls

# Authentication rate limit per IP (per /24 on ipv4 and /56 on ipv6)
AUTH_RATELIMIT_IP=60/hour

# Authentication rate limit per user (regardless of the source-IP)
AUTH_RATELIMIT_USER=100/day

# Opt-out of statistics, replace with "True" to opt out
DISABLE_STATISTICS=False

###################################
# Optional features
###################################

# Expose the admin interface (value: true, false)
ADMIN=true

# Choose which webmail to run if any (values: roundcube, rainloop, none)
WEBMAIL=roundcube

# Dav server implementation (value: radicale, none)
WEBDAV=none

# Antivirus solution (value: clamav, none)
ANTIVIRUS=clamav

###################################
# Mail settings
###################################

# Message size limit in bytes
MESSAGE_SIZE_LIMIT=50000000

# Message rate limit (per user)
MESSAGE_RATELIMIT=200/day

# Networks granted relay permissions
# Use this with care, all hosts in this networks will be able to send mail without authentication!
RELAYNETS=

# Will relay all outgoing mails if configured
RELAYHOST=

# Fetchmail delay
FETCHMAIL_DELAY=600

# Recipient delimiter, character used to delimiter localpart from custom address part
RECIPIENT_DELIMITER=+

# DMARC rua and ruf email
DMARC_RUA=postmaster
DMARC_RUF=postmaster

# Welcome email, enable and set a topic and body if you wish to send welcome
# emails to all users.
WELCOME=false
WELCOME_SUBJECT=Welcome to your new email account
WELCOME_BODY=Welcome to your new email account, if you can read this, then it is configured properly!

# Maildir Compression
# choose compression-method, default: none (value: bz2, gz)
COMPRESSION=
# change compression-level, default: 6 (value: 1-9)
COMPRESSION_LEVEL=

###################################
# Web settings
###################################

# Path to redirect / to
WEBROOT_REDIRECT=/webmail

# Path to the admin interface if enabled
WEB_ADMIN=/admin

# Path to the webmail if enabled
WEB_WEBMAIL=/webmail

# Website name
SITENAME=Project Saturn Mail

# Linked Website URL
WEBSITE=https://{{DOMAIN}}

###################################
# Advanced settings
###################################

# Log level threshold in start.py (value: CRITICAL, ERROR, WARNING, INFO, DEBUG, NOTSET)
LOG_LEVEL=INFO

# Resolve IPs to names
REAL_IP_HEADER=X-Forwarded-For
REAL_IP_FROM=172.18.0.0/16

# Session timeout
SESSION_TIMEOUT=86400

# Session encryption key
SESSION_COOKIE_SECURE=True

# Default password scheme
PASSWORD_SCHEME=PBKDF2

###################################
# Database settings
###################################
DB_FLAVOR=postgresql
DB_USER=mailu
DB_PW={{MAILU_DB_PASSWORD}}
DB_HOST=postgres
DB_NAME=mailu

###################################
# Redis settings
###################################
REDIS_ADDRESS=mailu-redis

###################################
# LDAP Authentication
###################################
# Enable LDAP authentication
AUTH_LDAP_ENABLED=true
AUTH_LDAP_SERVER_URI=ldap://ldap:389
AUTH_LDAP_BIND_USER_DN=cn=admin,dc=stack,dc=local
AUTH_LDAP_BIND_USER_PASSWORD={{STACK_ADMIN_PASSWORD}}
AUTH_LDAP_USER_BASE=ou=users,dc=stack,dc=local
AUTH_LDAP_USER_FILTER=(&(objectClass=inetOrgPerson)(mail=%s))
# Map LDAP attributes to Mailu user attributes
AUTH_LDAP_USER_ATTRIBUTE=mail
AUTH_LDAP_USER_OBJECTCLASS=inetOrgPerson

###################################
# IMAP settings (Dovecot)
###################################
# For single-node setup, leave IMAP_ADDRESS unset to disable director
# In clustered setups, this would be a comma-separated list of IMAP backends
# IMAP_ADDRESS=
