# Auto-generated by build-datamancy.main.kts
# Image versions are HARDCODED at build time
# Only secrets and deployment paths use runtime ${VARS}

services:
  qbittorrent:
    image: lscr.io/linuxserver/qbittorrent:latest
    container_name: qbittorrent
    restart: unless-stopped
    networks:
      caddy:
        aliases:
          - qbittorrent.${DOMAIN}
      internet:  # For BitTorrent P2P protocol
    depends_on:
      volume-init:
        condition: service_completed_successfully
    environment:
      PUID: ${DOCKER_USER_ID:-1000}
      PGID: ${DOCKER_GROUP_ID:-1000}
      TZ: UTC
      WEBUI_PORT: 8080
    volumes:
      - qbittorrent_config:/config
      - qbittorrent_data:/downloads
      - ./configs/qbittorrent/init:/custom-cont-init.d:ro
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:8080/"]
      interval: 60s
      timeout: 10s
      retries: 3
      start_period: 30s
