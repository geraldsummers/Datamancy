# Auto-generated by build-datamancy.main.kts
# Image versions are HARDCODED at build time
# Only secrets and deployment paths use runtime ${VARS}

services:
  element:
    image: vectorim/element-web:v1.11.91
    container_name: element
    restart: unless-stopped
    networks:
      caddy:
        aliases:
          - element.${DOMAIN}
      matrix-internal:
        aliases:
          - element.${DOMAIN}
    depends_on:
      synapse:
        condition: service_healthy
    volumes:
      - element_data:/app/config
      - ./configs/applications/element/config.json:/app/config.json:ro
    healthcheck:
      test: ["CMD", "wget", "--quiet", "--tries=1", "--spider", "http://localhost:80/"]
      interval: 60s
      timeout: 10s
      retries: 3
      start_period: 30s
