services:
  # Infrastructure Services
  - name: "Authelia"
    url: "https://auth.${DOMAIN}"
    authType: NONE
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "a[href*='logout']"

  - name: "Grafana"
    url: "https://grafana.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "[aria-label*='Dashboard']"

  - name: "LDAP Account Manager"
    url: "https://lam.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "a[href*='tree']"

  - name: "Dockge"
    url: "https://dockge.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".stack-list"

  - name: "Homepage"
    url: "https://homepage.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".service"

  - name: "Kopia"
    url: "https://kopia.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".snapshots"

  # Application Services
  # OIDC services temporarily disabled - require button selector improvements
  # - name: "Vaultwarden"
  #   url: "https://vaultwarden.${DOMAIN}"
  #   authType: OIDC
  #   credentials:
  #     username: "${STACK_ADMIN_USER}"
  #     password: "${STACK_ADMIN_PASSWORD}"
  #   finalWaitSelector: ".vault-filters"

  # - name: "Planka"
  #   url: "https://planka.${DOMAIN}"
  #   authType: OIDC
  #   credentials:
  #     username: "${STACK_ADMIN_USER}"
  #     password: "${STACK_ADMIN_PASSWORD}"
  #   finalWaitSelector: ".board"

  - name: "Bookstack"
    url: "https://bookstack.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "[data-sidebar]"

  - name: "Seafile"
    url: "https://seafile.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".library-list"

  - name: "OnlyOffice"
    url: "https://onlyoffice.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "#id-portal"

  # - name: "JupyterHub"
  #   url: "https://jupyterhub.${DOMAIN}"
  #   authType: OIDC
  #   credentials:
  #     username: "${STACK_ADMIN_USER}"
  #     password: "${STACK_ADMIN_PASSWORD}"
  #   finalWaitSelector: ".home-logo"

  # - name: "Mastodon"
  #   url: "https://mastodon.${DOMAIN}"
  #   authType: OIDC
  #   credentials:
  #     username: "${STACK_ADMIN_USER}"
  #     password: "${STACK_ADMIN_PASSWORD}"
  #   finalWaitSelector: ".compose-form"

  - name: "Home Assistant"
    url: "https://homeassistant.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "home-assistant"

  - name: "Forgejo"
    url: "https://forgejo.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".dashboard"

  - name: "qBittorrent"
    url: "https://qbittorrent.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: "#torrentsTableDiv"

  # Mail Services
  - name: "SOGo"
    url: "https://sogo.${DOMAIN}"
    authType: AUTHELIA_FORWARD
    credentials:
      username: "${STACK_ADMIN_USER}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".view-list"

  - name: "Mailu Admin"
    url: "https://mail.${DOMAIN}/admin"
    authType: NONE
    credentials:
      username: "${STACK_ADMIN_USER}@${MAIL_DOMAIN}"
      password: "${STACK_ADMIN_PASSWORD}"
    finalWaitSelector: ".admin-panel"
